<div class="title">チラウラリア公営チラモン闘技場「P.W.D.」</div>

<div class="tweet-container list">
  <div class="hukidasi width-full">
    <h1>遊び方</h1>
    <p>チラウラリアモンスター(通称チラモン)を育て、あいてのチラモンと闘わせるゲームです。</p>
    <p>チラモンを育て、技を教え、戦術を練ると、チラモンは自分で考え、闘います。</p>
    <p>最強のチラモンを育て上げ、「チラモンマスター」を目指しましょう！</p>
  </div>
</div>

<div class="tweet-container">
  <% @next_battle.map.with_index do |next_battle, index| %>
    <% rank = index %>
    <% if next_battle.present? %>
      <div class="hukidasi">
        <h1><%= Constants::TIRAMON_RULE_NAME[rank] %></h1>
        <h2>次の試合</h2>

        <div class="d-flex flex-wrap justify-content-center">

          <% t = next_battle.blue_tiramon.getData %>
          <div class="content d-flex justify-content-center m-2">
            <div class="content-image">
              <%= image_tag "/images/tiramon/tiramon.png", class: "user-img" %>
            </div>
            <div class="content-content word-break">
              <div><%= t[:name] %></div>
              <div></div>
              <div><%= t[:train][:level].to_i %> Lv</div>
              <div><%= (t[:height]*100).to_i %> cm</div>
              <div><%= t[:weight].to_i %> kg</div>
            </div>
          </div>

          <div class="content d-flex justify-content-center m-2">
            <div class="content-content word-break">
              <div>VS</div>
            </div>
          </div>

          <% t = next_battle.red_tiramon.getData %>
          <div class="content d-flex flex-column justify-content-center m-2">
            <div class="content d-flex justify-content-center m-2">
              <div class="content-image">
                <%= image_tag "/images/tiramon/tiramon.png", class: "user-img" %>
              </div>
              <div class="content-content word-break">
                <div><%= t[:name] %></div>
                <div></div>
                <div><%= t[:train][:level].to_i %> Lv</div>
                <div><%= (t[:height]*100).to_i %> cm</div>
                <div><%= t[:weight].to_i %> kg</div>
              </div>
            </div>
            <div class="text-center">
              <i class="fas fa-crown"></i>
            </div>
          </div>

        </div>


        <div class="d-flex flex-wrap justify-content-center">
          <div class="content d-flex justify-content-center m-2">
            <div class="content-content text-center word-break">
              <div><%= next_battle.datetime.strftime("%Y年%m月%d日 %H:%M:%S") %> 試合開始</div>
            </div>
          </div>
        </div>

      </div>
    <% end %>
  <% end %>

</div>

<div class="tweet-container">
  <% @battles.map.with_index do |battles, index| %>
    <% rank = index %>

    <div class="hukidasi">
      <h1><%= Constants::TIRAMON_RULE_NAME[rank] %></h1>
      <h2>試合結果(最新<%= battles.count %>件)</h2>
      <% if battles.present? %>
        <% battles.map do |battle| %>
          <% blue = battle.blue_tiramon.getData %>
          <% red = battle.red_tiramon.getData %>
            <div class="content d-flex justify-content-center m-2">
              <div class="content-content text-center word-break">
                <div><%= battle.datetime.strftime("%Y年%m月%d日 %H:%M:%S") %>
                  <%= link_to battle do %><%= blue[:name] %> VS <%= red[:name] %><% end %>
                </div>
              </div>
            </div>
        <% end %>
      <% else %>
        <div class="content d-flex flex-wrap justify-content-center m-2">
          <div class="text-center">
            まだありません。
          </div>
        </div>
      <% end %>
    </div>
  <% end %>
</div>

<% if user_signed_in? %>
  <div class="tweet-container">

    <div class="hukidasi">
      <h1>トレーナー情報</h1>
      <h3>所持VARTH <%= @user_points %>va</h3>
      <ul>
        <li>トレーナーレベル: <%= @tiramon_trainer.level %></li>
        <li>チラモンボール: <%= @tiramon_trainer.tiramon_ball %></li>
        <li>行動ポイント: <%= @tiramon_trainer.move %>/<%= @tiramon_trainer.move_max %></li>
      </ul>
      <div class="m-4"><%= link_to tiramon_trainer_path, class: "btn btn-primary w-100" do %>トレーナー情報<% end %></div>
    </div>

    <div class="hukidasi">
      <h1>チラモンショップ</h1>
      <div class="m-2">
        <%= link_to tiramon_trainer_get_ball_path(id: @tiramon_trainer), method: :post, class: "btn btn-danger w-100 my-1", data: { confirm: "チラモンボールを購入しますか？" } do %>
          チラモンボールを購入<br />
          <%= Constants::TIRAMON_TRAINER_BALL_PRICE %>va
        <% end %>
      </div>
      <div class="m-2">
        <%= link_to tiramon_trainer_move_recovery_path(id: @tiramon_trainer), method: :post, class: "btn btn-warning w-100 my-1", data: { confirm: "チラモンボールを購入しますか？" } do %>
          行動ポイントを回復<br />
          <%= Constants::TIRAMON_TRAINER_MOVE_RECOVERY_PRICE %>va
        <% end %>
      </div>
    </div>

    <div class="hukidasi">
      <h1>マイチラモンの活躍</h1>
      <h2>試合結果(最新<%= @my_battles.count %>件)</h2>
      <% if @my_battles.present? %>
        <% @my_battles.map do |battle| %>
          <% blue = battle.blue_tiramon.getData %>
          <% red = battle.red_tiramon.getData %>
            <div class="content d-flex justify-content-center m-2">
              <div class="content-content text-center word-break">
                <div><%= battle.datetime.strftime("%Y年%m月%d日 %H:%M:%S") %>
                  <%= link_to battle do %><%= blue[:name] %> VS <%= red[:name] %><% end %>
                </div>
              </div>
            </div>
        <% end %>
      <% else %>
        <div class="content d-flex flex-wrap justify-content-center m-2">
          <div class="text-center">
            まだありません。
          </div>
        </div>
      <% end %>
    </div>

  </div>
<% end %>

<div class="tweet-container">
  <div class="hukidasi">
    <h1>遊び方</h1>
    <p>はじめまして！<br />チラウラリア モンスターの せかいへ<br />ようこそ！</p>
    <p>わたしの なまえは <%= Gimei.last %><br />みんなからは チラモン はかせと<br />したわれて おるよ</p>
    <p>この せかいには<br />チラウラリア モンスターと よばれる</p>
    <p>いきもの たちが<br />いたるところに すんでいる！</p>
    <p>その チラモン という いきものを<br />ひとは ペットに したり<br />しょうぶに つかったり・・・</p>
    <p>そして・・・</p>
    <p>わたしは この チラモンの<br />けんきゅうを してる というわけだ</p>
    <br />
    <p>いよいよ これから<br />きみの ものがたりの はじまりだ！</p>
    <p>ゆめと ぼうけんと！<br />チラウラリア モンスターの せかいへ！<br />レッツ ゴー！</p>
  </div>
</div>
