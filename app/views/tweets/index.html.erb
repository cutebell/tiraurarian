<div id="tweet-form" class="tweet-form">
  <h2>今なにしてる？………ごめん。</h2>

  <% if params[:mode] == "tag" %>
    <% default_value = " ##{params[:tag]}" %>
  <% else %>
    <% default_value = "" %>
  <% end %>

  <%= render partial: "/layouts/form", locals: { tweet: @new_tweet, value: default_value } %>
</div>

<div class="tools">
  <a class="link-item" id="btn-hot">
    <div class="control-button accent">
      <span class="glyphicon glyphicon-fire full center" aria-hidden="true"></span>
    </div>
  </a>
  <a class="link-item" id="btn-recent">
    <div class="control-button accent">
      <span class="glyphicon glyphicon-time full center" aria-hidden="true"></span>
    </div>
  </a>
  <a class="link-item" id="btn-search">
    <div class="control-button accent">
      <span class="glyphicon glyphicon-search full center" aria-hidden="true"></span>
    </div>
  </a>
</div>

<div id="tag-hot" class="tag-form">
  <h3>話題のタグ</h3>
  <%= render partial: "/layouts/tags", locals: { tags: @hot_tags } %>
</div>

<div id="tag-recent" class="tag-form">
  <h3>最近使ったタグ</h3>
  <%= render partial: "/layouts/tags", locals: { tags: @recent_tags } %>
</div>

<div id="tag-search" class="tag-form">
  <h3>タグ検索</h3>
  <%= form_tag("/tweets", method: "get", class: "form-horizontal", role: "form") do %>
    <%= hidden_field_tag :mode, "tag" %>
    <div class="col-sm-12">
      <div class="form-group">
        <div class="input-group">
          <span class="input-group-addon">#</span>
          <%= text_field_tag :tag, params[:tag], class: "form-control", placeholder: "タグ" %>
          <span class="input-group-btn">
            <%= submit_tag "タグ検索", class: "btn btn-default" %>
          </span>
        </div>
      </div>
    </div>
  <% end %>
</div>

<%= render partial: "/layouts/tweets", locals: { tweets: @tweets, show_list: false, show_parent: true } %>

<script>
  $(function () {
    $("#btn-hot").click(function () {

      if($("#tag-hot").is(':visible')){
        $(".tag-form").hide();
      }else{
        $(".tag-form").hide();
        $("#tag-hot").show();
      }
    });

    $("#btn-recent").click(function () {
      if($("#tag-recent").is(':visible')){
        $(".tag-form").hide();
      }else{
        $(".tag-form").hide();
        $("#tag-recent").show();
      }
    });

    $("#btn-search").click(function () {
      if($("#tag-search").is(':visible')){
        $(".tag-form").hide();
      }else{
        $(".tag-form").hide();
        $("#tag-search").show();
      }
    });

    $("#btn-close").click(function () {
      $(".tag-form").hide();
    });
  });
</script>
